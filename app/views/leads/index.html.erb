<!-- Manually Create Lead -->
<%= link_to "Add Lead", new_lead_path, class: "btn btn-primary" %>

<!-- @leads = Lead.all -->
<% @leads.each do |lead| %>
  <p>Contact Name: <%= lead.name %></p>
  <p>Contact Email: <%= lead.email %></p>
  <p>Lead Status: <%= lead.status.capitalize %></p>
  <p>Lead Source: <%= lead.source %></p>
  <p>Saleperson: <%= link_to lead.user.name, user_path(lead.user) %></p>
  <p>Lead Generated: <%= lead.created_at %></p>
  <%= link_to "Accept Lead", mark_as_accepted_lead_path(lead), method: :patch, class: "btn btn-primary" %>
  <%= link_to "Settle Lead", mark_as_settled_lead_path(lead), method: :patch, class: "btn btn-primary" %>
  <%= link_to "Mark as Lost", mark_as_lost_lead_path(lead), method: :patch, class: "btn btn-primary" %>
  <%= link_to "Edit", edit_lead_path(lead), class: "btn btn-primary" %>
  <%= link_to "Delete", lead_path(lead),
      method: :delete,
      data: { confirm: "Are you sure you want to Delete this lead?" } %>
  <hr>
<% end %>

<!-- use this for the table formatting: -->
<!-- <table>
  <thead>
    <tr>
      <th>First Name</th>
      <th>Last Name</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Boris</td>
      <td>Paillard</td>
    </tr>
    [...]
  </tbody>
</table> -->

<!-- Stats -->

  <!-- Conversion Rate -->
  <p>Conversion Rate: <%= conversion_rate_for(@leads.where(status: "settled"), @leads) %> %</p>
  <!-- Avg Response Time -->
  <p>Avg Response Time: <%= Lead.average(:response_time).round %> seconds</p>
  <!-- Total Leads this week -->
  <p>Total Leads this week: <%= count_leads_since(DateTime.yesterday) %> leads this week!</p>
  <!-- Highest Salesperon -->
  <p>SalesPerson Ranking: <%= calculate_ranking(User) %> is First!!</p>
  <!-- User Response time -->
  <p>User AVG Response Time: <%= User.first.leads.average(:response_time).round %> seconds</p>
  <!-- Leads from each Source -->
  <p>Leads from Truck Sales: <%= @leads.where(source: "Truck Sales").count %> leads</p>
  <!-- Lead generated ... ago -->
  <p>Lead generated... <%= time_ago_in_words(User.first.leads.first.created_at) %> ago</p>
